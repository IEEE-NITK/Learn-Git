<link href="/assets/bootstrap.css" rel="stylesheet">
<link href="/assets/bootstrap-responsive.css" rel="stylesheet">

<!-- Add custom CSS here -->
<link href="/assets/sb-admin.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<!-- Page Specific CSS -->
<script data-main="js/main" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.4/require.min.js"></script>

<link href="/assets/heroic-features.css" rel="stylesheet">
<link href="/assets/jquery.terminal.css" rel="stylesheet"/>
<link rel="stylesheet" href="/assets/jquery-ui.css" />
<link rel="stylesheet" href="/assets/explaingit.css">

<script type="text/javascript" src="/assets/jquery-1.10.2.min.js"></script>
<script src="/assets/jquery-1.7.1.min.js"></script>
<script src="/assets/simple-expand.js"></script>

<script src="/assets/jquery.mousewheel-min.js"></script>
<script src="/assets/jquery.terminal-0.7.7.js"></script>
<script type="text/javascript" src="/assets/jquery.jstree.js"></script>

<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:300,400' rel='stylesheet' type='text/css'><!-- <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.4.3.min.css"> -->

<style>
body {
  margin: 0;
  padding: 0;
}
.tilda {
  position: inherit;
}
#editor {

  position: relative;
  height: 511px;
}
</style>
<script>
var global_variable=0;

jQuery(document).ready(function($) {
 $(window).scroll(function() {
  $('.tilda').each(function() {
   $(this).css({top: $('body').prop('scrollTop')});
 });
});
});
$(document).ready(function(){
// $('#treeView').jstree({


// "json_data" : {
//   "data":[
// {"data":"Example 1","children":[{"data":"Yahoo","metadata":{"href":"http://www.yahoo.com"}},{"data":"Google","metadata":{"href":"http://www.google.com"}},{"data":"Bing","metadata":{"href":"http://www.bing.com"}}]},{"data":"Example 2","children":[{"data":"Twitter","metadata":{"href":"http://www.twitter.com"}},{"data":"Facebook","metadata":{"http://href":"www.facebook.com"}},{"data":"MySpace","metadata":{"href":"http://www.myspace.com"}}]}
//   ]

// },"plugins":["themes","json_data","ui"]

// }).bind("select_node.jstree", function(e, data)
//                     {
//                         if(jQuery.data(data.rslt.obj[0], "href"))
//                         {
//                             window.location=jQuery.data(data.rslt.obj[0], "href");
//                         }
//                         else
//                         {
//                             alert("No href defined for this element");
//                         }
//                     })
});
</script>

<script>


String.prototype.strip = function(char) {
  return this.replace(new RegExp("^" + char + "*"), '').
  replace(new RegExp(char + "*$"), '');
}


$.extend_if_has = function(desc, source, array) {
  for (var i=array.length;i--;) {
    if (typeof source[array[i]] != 'undefined') {
      desc[array[i]] = source[array[i]];
    }
  }
  return desc;
};


(function($) {
  $.fn.tilda = function(eval, options) {
    if ($('body').data('tilda')) {
      return $('body').data('tilda').terminal;
    }
    this.addClass('tilda');
    options = options || {};
    eval = eval || function(command, term) {
      term.echo("you don't set eval for tilda");
    };
    var settings = {
      prompt: '$> ',
      name: 'tilda',
      height: 550,
            // width: 550,
            enabled: false,
            greetings: 'Git Terminal',
            keypress: function(e) {
              if (e.which == 96) {
                    // return false;
                  }
                }
              };
              if (options) {
                $.extend(settings, options);
              }
              this.append('<div class="td"></div>');
              var self = this;
              self.terminal = this.find('.td').terminal(eval, settings);
              var focus = false;
        // $(document.documentElement).keypress(function(e) {
        //     if (e.which == 96) {
        //         self.slideToggle('fast');
        //         self.terminal.focus(focus = !focus);
        //         self.terminal.attr({
        //             scrollTop: self.terminal.attr("scrollHeight")
        //         });
        //     }
        // });
$('body').data('tilda', this);
        // this.hide();$(".control-box input").val(command)
        return self;
      };
    })(jQuery);

//--------------------------------------------------------------------------
jQuery(document).ready(function($) {

  $('#tilda').tilda(function(command, terminal) {
    $(".control-box input").val(command);
    $(".control-box input").focus();
    $(".control-box input").blur();
    ws.send("cmd:"+command);
        //terminal.echo('you type command "' + command + '"');
      });
  $('#testbutton').click(function(){
   var searchThis = document.getElementById('new1').innerHTML;
  
 });
});


</script>
<style>
body {
  padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
}
</style>


<!-- <link href="/assets/style.css" rel="stylesheet" type="text/css" /> -->

<style type="text/css">
.selection {
  display: none;
}
</style>



<script type="text/javascript">
function test(name)
{
  document.getElementById("new1").innerHTML=name;

}


</script>

</head>

<body>

 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">


    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="index.html"><i class="fa fa-home" style="margin-right:15px;color:white;"></i>NITK-OPT</a>
  </div>


  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="nav navbar-nav">
      <li class="active"><a href="index.html">Home</a></li>
      <li ><a href="#">About</a></li>
      <li ><a href="#">Contact</a></li>

    </ul>

    <ul class="nav navbar-nav navbar-right">

      <li class="dropdown dropdown-user" data-toggle="dropdown" style="width:150px;">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="height:50px;"> <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 30%;">
        <span class="sr-only">60% Complete</span>
        </div>
        </div><!--  <b class="caret"></b --></a>
        <ul class="dropdown-menu">
          <li> 
            <div style="margin-left:35%;"> User 1 </div>
            <div class="progress" style="margin:5px;">
            <div class="progress-bar  progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
              <span class="sr-only">60% Complete</span>
            </div>
            </div>
          </li>
          <li class="divider"></li>
          <li>
            <div style="margin-left:35%;"> User 2 </div>
            <div class="progress" style="margin:5px;">
            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
              <span class="sr-only">40% Complete</span>
            </div>
            </div>
          </li>
        </ul>
        </li>




     <li class="dropdown messages-dropdown" >
     <% if not @notifications.nil? %>
      <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell-o"></i> Notifications <span class="badge"><%= @notifications.count %></span> <b class="caret"></b></a>
      <% if @notifications.count>0 %>
      <ul class="dropdown-menu">
        <% @notifications.each do |n| %>
        <% n = JSON.parse(n) %>
        <li class="message-preview">
          <% unless n["link"].nil? %>
          <a href="<%= n["link"] %>">
          <% else %>
          <a href="#">
            <% end %>
            <span class="avatar"><img src="thej.jpeg" width="50px" height="50px" class="img-circle"></span>
            <% puts "** #{n.inspect}" %>
            <% user = User.find(n["from"].to_i) %>
            <span class="name"><%= user.name %></span>
            <span class="message"><%= truncate n["content"], length: 35 %></span>
            <span class="time"><i class="fa fa-clock-o"style="color:#BEBEBE;"></i>&nbsp;&nbsp;<%= time_ago_in_words n["time"]%> ago</span>
          </a>
        </li>
        <li class="divider"></li>
        <% end %>
      </ul>
      <% end %>
      <% end %>
      <li class="dropdown user-dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> <%= current_user.name %> <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="#"><i class="fa fa-user" style="color:#BEBEBE;"></i> Profile</a></li>

          <li><a href="#"><i class="fa fa-gear" style="color:#BEBEBE;"></i> Settings</a></li>

          <li class="divider"></li>
          <li> <%= link_to "Log Out", destroy_user_session_path, method: :post %></li>
        </ul>
      </li>

    </ul>
  </div><!-- /.navbar-collapse -->



  <!-- /.navbar-collapse -->
</nav>
<div class="container">

  



 <!--  <div class="row">
  <div class="col-lg-12" style="display:inline-block;">
    <h3 style="float:left;">Workspace</h3>
    <a href="#" style="float:left;margin-top:25px;margin-left:10px;" id="click">Go Back</a>
    <div id="treeView" style="margin-top:38px; float:left;margin-left:40px;"></div>
  </div>
 </div> --><!-- /.row -->
 <!-- /.row -->
 
 <div class="row">
    <div class="col-lg-1" style="margin-left:5px;">
      <h3>Directory</h3>
      <div id="treeView"></div>
    </div>
     <div class="col-lg-8">

      <div class="row-fluid span12">
        <ul id="tab" class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">Terminal</a></li>
        <li ><a href="#tab2" data-toggle="tab" id="edit_open">Editor</a></li>
         <li ><a href="#tab3" data-toggle="tab" id="open-fetch">Visualizations</a></li>
        
    </ul>
       <div class="tab-content">
        <div class="tab-pane fade in active" id="tab1">
           <div id="tilda"></div>
        </div>
        <div class="tab-pane fade" id="tab3">
          <div class="container">
  <div class="row command-list">
    <div class="twocol">
      <h4>Basic Commands</h3>
      <a id="open-commit" class="openswitch" href="#">git commit</a>
      <a id="open-branch" class="openswitch" href="#">git branch</a>
    </div>
    <div class="twocol">
      <h4>&nbsp;</h4>
      <a id="open-checkout" class="openswitch" href="#">git checkout</a>
      <a id="open-checkout-b" class="openswitch" href="#">git checkout -b</a>
    </div>
    <div class="twocol">
      <h4>Undo Commits</h4>
      <a id="open-reset" class="openswitch" href="#">git reset</a>
      <a id="open-revert" class="openswitch" href="#">git revert</a>
    </div>
    <div class="twocol">
      <h4>Combine Branches</h4>
      <a id="open-merge" class="openswitch" href="#">git merge</a>
      <a id="open-rebase" class="openswitch" href="#">git rebase</a>
    </div>
    <div class="twocol">
      <h4>Remote Server</h4>
      <a id="" class="openswitch" href="#">git fetch</a>
      <a id="open-pull" class="openswitch" href="#">git pull</a>
    </div>
    <div class="twocol last">
      <h4>&nbsp;</h4>
      <a id="open-push" class="openswitch" href="#">git push</a>
    </div>
  </div>
  <div class="row concept-area">
    <div id="ExplainGitCommit-Container" class="twelvecol concept-container">
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitBranch-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitCheckout-Container" class="twelvecol concept-container">
      
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitCheckout-b-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitReset-Container" class="twelvecol concept-container">
    
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitRevert-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitMerge-Container" class="twelvecol concept-container">
      
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitRebase-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitFetch-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitPull-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitPush-Container" class="twelvecol concept-container">
      
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitClean-Container" class="twelvecol concept-container">
    
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitFetchRebase-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitDeleteBranches-Container" class="twelvecol concept-container">
     
      <div class="playground-container"></div>
    </div>
    <div id="ExplainGitFree-Container" class="twelvecol concept-container">
      
      <div class="playground-container"></div>
    </div>
  </div>
 
</div>

<svg version="1.1" baseProfile="full"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns:ev="http://www.w3.org/2001/xml-events"
     width="0" height="0">

    <marker id="triangle" refX="5" refY="5" markerUnits="strokeWidth" fill="#666"
            markerWidth="4" markerHeight="3" orient="auto" viewBox="0 0 10 10">
        <path d="M 0 0 L 10 5 L 0 10 z"/>
    </marker>
    <marker id="faded-triangle" refX="5" refY="5" markerUnits="strokeWidth" fill="#DDD"
            markerWidth="4" markerHeight="3" orient="auto" viewBox="0 0 10 10">
        <path d="M 0 0 L 10 5 L 0 10 z"/>
    </marker>
    <marker id="brown-triangle" refX="5" refY="5" markerUnits="strokeWidth" fill="#663300"
            markerWidth="4" markerHeight="3" orient="auto" viewBox="0 0 10 10">
        <path d="M 0 0 L 10 5 L 0 10 z"/>
    </marker>
</svg>

<script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-commit'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Commit',
            height: 200,
            baseLine: 0.4,
            commitData: [
                {id: 'e137e9b', tags: ['master']}
            ],
            initialMessage: 'Type git commit a few times.'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

<script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-branch'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Branch',
            baseLine: 0.6,
            commitData: [
                {id: 'e137e9b', tags: ['master']}
            ]
        });
    };

    openSwitch.addEventListener('click', open, false);
});
 </script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-checkout'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Checkout',
            height: 500,
            commitData: [
                {id: 'e137e9b'},
                {id: 'bb92e0e', parent: 'e137e9b', tags: ['master']},
                {id: 'e088135', parent: 'e137e9b', tags: ['dev']}
            ],
            initialMessage:
                'Use git checkout, git branch, and git commit commands until you understand.'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-checkout-b'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Checkout-b',
            height: 500,
            commitData: [
                {id: 'e137e9b'},
                {id: 'f5b32c8', parent: 'e137e9b'},
                {id: 'bb92e0e', parent: 'f5b32c8', tags: ['master']},
                {id: 'e088135', parent: 'e137e9b', tags: ['dev']}
            ],
            initialMessage:
                'Use git checkout -b and git commit commands until you understand.'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-reset'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Reset',
            height: 200,
            baseLine: 0.5,
            commitData: [
                {id: 'e137e9b'},
                {id: '0e70093', parent: 'e137e9b'},
                {id: '3e33afd', parent: '0e70093', tags: ['master']}
            ],
            initialMessage: 'Type "git reset HEAD^".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

<script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-revert'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Revert',
            height: 200,
            baseLine: 0.5,
            commitData: [
                {id: 'e137e9b'},
                {id: '0e70093', parent: 'e137e9b'},
                {id: '3e33afd', parent: '0e70093', tags: ['master']}
            ],
            initialMessage: 'Type "git revert 0e70093".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-merge'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Merge',
            height: 500,
            commitData: [
                {id: 'e137e9b'},
                {id: 'bb92e0e', parent: 'e137e9b', tags: ['master']},
                {id: 'f5b32c8', parent: 'e137e9b', tags: ['ff']},
                {id: 'e088135', parent: 'f5b32c8', tags: ['dev']}
            ],
            initialMessage:
                'Type "git merge dev".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-rebase'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Rebase',
            height: 500,
            commitData: [
                {id: 'e137e9b'},
                {id: 'bb92e0e', parent: 'e137e9b', tags: ['master']},
                {id: 'f5b32c8', parent: 'e137e9b'},
                {id: 'e088135', parent: 'f5b32c8', tags: ['dev']}
            ],
            currentBranch: 'dev',
            initialMessage:
                'Type "git rebase master".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-fetch'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Fetch',
            height: 500,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master']},
                {id: '6ce726f', parent: 'e137e9b'},
                {id: 'bb92e0e', parent: '6ce726f', tags: ['master']},
                {id: '0cff760', parent: 'e137e9b', tags: ['origin/dev']},
                {id: '4ed301d', parent: '0cff760', tags: ['dev']}
            ],
            originData: [
                {id: 'e137e9b'},
                {id: '7eb7654', parent: 'e137e9b'},
                {id: '090e2b8', parent: '7eb7654'},
                {id: 'ee5df4b', parent: '090e2b8', tags: ['master']},
                {id: '0cff760', parent: 'e137e9b'},
                {id: '2f8d946', parent: '0cff760'},
                {id: '29235ca', parent: '2f8d946', tags: ['dev']}
            ],
            initialMessage:
                'Carefully compare the commit IDs between the origin and the local repository. ' +
                'Then type "git fetch".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-pull'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Pull',
            height: 500,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master']},
                {id: '46d095b', parent: 'e137e9b', tags: ['master']}
            ],
            originData: [
                {id: 'e137e9b'},
                {id: '7eb7654', parent: 'e137e9b'},
                {id: '090e2b8', parent: '7eb7654'},
                {id: 'ee5df4b', parent: '090e2b8', tags: ['master']}
            ],
            initialMessage:
                'Carefully compare the commit IDs between the origin and the local repository. ' +
                'Then type "git pull".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-push'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Push',
            height: 500,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master']},
                {id: '46d095b', parent: 'e137e9b', tags: ['master']}
            ],
            originData: [
                {id: 'e137e9b'},
                {id: '7eb7654', parent: 'e137e9b', tags: ['master']}
            ],
            initialMessage:
                'Carefully compare the commit IDs between the origin and the local repository. ' +
                'Then type "git push".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

<script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-clean'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Clean',
            height: 200,
            baseLine: 0.4,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master']},
                {id: '0e70093', parent: 'e137e9b'},
                {id: '3e33afd', parent: '0e70093', tags: ['master']}
            ],
            initialMessage: 'Type "git reset origin/master".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-fetchrebase'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'FetchRebase',
            height: 500,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master', 'master']},
                {id: '46d095b', parent: 'e137e9b'},
                {id: 'dccdc4d', parent: '46d095b', tags: ['my-branch']}
            ],
            currentBranch: 'my-branch',
            originData: [
                {id: 'e137e9b'},
                {id: '7eb7654', parent: 'e137e9b'},
                {id: '090e2b8', parent: '7eb7654'},
                {id: 'ee5df4b', parent: '090e2b8', tags: ['master']}
            ],
            initialMessage:
                'First type "git fetch". Then type "git rebase origin/master".'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-deletebranches'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'DeleteBranches',
            height: 500,
            baseLine: 0.6,
            commitData: [
                {id: 'e137e9b'},
                {id: 'bb92e0e', parent: 'e137e9b'},
                {id: 'd25ee9b', parent: 'bb92e0e', tags: ['master']},
                {id: '071ff28', parent: 'e137e9b', tags: ['protoss']},
                {id: 'f5b32c8', parent: 'bb92e0e'},
                {id: 'e088135', parent: 'f5b32c8', tags: ['zerg']},
                {id: '9e6c322', parent: 'bb92e0e'},
                {id: '593ae02', parent: '9e6c322', tags: ['terran']}
            ],
            currentBranch: 'terran',
            initialMessage:
                'Delete some branches.'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>

 <script type="text/javascript">
require(['explaingit'], function (explainGit) {
    var openSwitch = document.getElementById('open-freeplay'),
        open;

    open = function () {
        explainGit.reset();
        this.classList.add('selected');

        explainGit.open({
            name: 'Free',
            height: 500,
            commitData: [
                {id: 'e137e9b', tags: ['origin/master', 'master']}
            ],
            originData: [
                {id: 'e137e9b'},
                {id: '7eb7654', parent: 'e137e9b'},
                {id: '090e2b8', parent: '7eb7654'},
                {id: 'ee5df4b', parent: '090e2b8', tags: ['master']}
            ],
            initialMessage:
                'Have fun.'
        });
    };

    openSwitch.addEventListener('click', open, false);
});
</script>
        </div>
        <div class="tab-pane fade " id="tab2">
          <div id="texte" style="background-color:#eee;width:101%;height:101%;">
            <pre id="editor">// Type your code here </pre></div>
             <button type="button" class="btn btn-info" onClick="write_content();clickb();">Save</button>
          <script src="../src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
          <script>
          var editor = ace.edit("editor");
          editor.setTheme("ace/theme/chrome");
          editor.getSession().setMode("ace/mode/javascript");</script>

          <script>
          String.prototype.replaceAll = function(search, replace)
          {
    //if replace is null, return original string otherwise it will
    //replace search string with 'undefined'.
    if(!replace)
      return this;

    return this.replace(new RegExp('[' + search + ']', 'g'), replace);
  };
  function trim_str (str) {
    str = str.replace(/^\s+/, '');
    for (var i = str.length - 1; i >= 0; i--) {
      if (/\S/.test(str.charAt(i))) {
        str = str.substring(0, i + 1);
        break;
      }
    }
    return str;
  }

        
// var str = 'ABCADRAE';
// alert(str.replaceAll('A','X'));

//There is gonna be problem with firefox websockets, solve that later
address= "ws://127.0.0.1:4000";
ws = new WebSocket(address);

ws.onopen = function(){
    // ws.send("Connnecting");
    ws.send("id:<%= current_user.repos.where(course_id:params[:id]).first.id %>")
  }
  ws.onmessage = function(msg){
    obj = jQuery.parseJSON(msg.data);
    if (obj.opt == "dir")
    {
     $('#treeView').jstree({
      "json_data" : {
        "data": obj.content
      },"plugins":["themes","json_data","ui"]
    }).bind("select_node.jstree", function(e, data)
    {
                      // alert('sdiugfsadug')
                      var parents = [];
                      data.rslt.obj.parents("li").each(function () {
                        parents.push({ id: $(this).attr("id"), description: $(this).children("a").text() });
                      });
                      str="."
                      for(i=parents.length-1;i>=0;i--)
                      {
                        str+="/"+trim_str(parents[i].description)
                        // console.log(parents[i].description)
                      }
                      global_variable = str+"/"+trim_str(data.rslt.obj.text());
                      // console.log(data.rslt.obj.text());
                      // console.log(str);
                      ws.send("open:"+str+"/"+trim_str(data.rslt.obj.text()))
                      $("#edit_open").click();
                      editor.getSession().setValue("")
                      // if(jQuery.data(data.rslt.obj[0], "href"))
                      // {
                      //   console.log(jQuery.data(data.rslt.obj[0], "href"));
                      //     // window.location=jQuery.data(data.rslt.obj[0], "href");
                      // }
                    });
}
else if(obj.opt == "course-objective")
{
  $(".course-objective").html(obj.content)
  $("#question").effect("highlight",{},1000)
}
else if(obj.opt == "course-references")
{
  $(".course-references").html(obj.content)
}
else if(obj.opt == "course-links")
{
  $(".course-links").html(obj.content)
}
else if(obj.opt == "course-body")
{
  $(".course-body").html(obj.content)
}
else if(obj.opt == "course-hint")
{
  $("#hint").html(obj.content)
}
else if(obj.opt == "file-content")
{
  var myCode = editor.getSession().getValue();
  editor.getSession().setValue(myCode+obj.content)
}
else if(obj.opt == "file-content")
{
  var myCode = editor.getSession().getValue();
  editor.getSession().setValue(myCode+obj.content)
}
else if(obj.opt == "progress1")
{
  
      // alert("jfshioh");
      progress1(obj.content)
    }
    else if(obj.opt == "progress2")
    {
      
      // alert("jfshioh");
      progress2(obj.content)
    }
    else
    {
      $(".terminal-output").append("<div>"+obj.content.replaceAll("<","&lt;").replaceAll(">","&gt;")+"<div>");
      $(".terminal-output").css("line-height","initial");
      $(".terminal-output").css("font-size","15px");
      $(".terminal-output").css("color","yellowgreen");
    }
  }
  ws.onclose = function(){
    // $("body").append("End");
  }

  </script>
<!-- </div> -->

</div>
        
        
    </div>
    </div>





</div>
<div class="col-lg-2" style="margin-left:20px;padding:20px;">
  <div id="question" style="background-color:#eee;padding:10px;width:100%;">
    
    <h1 class="course-objective"><%= @stage.objective %></h1>
    <p class="course-body"><%= @stage.pbody %></p>
    <h3>References:</h3>
    <p class="course-references"><%= link_to @stage.references,@stage.references,target: "_blank" %></p>
    <h3>Useful Links:</h3>
    <p class="links"><%= @stage.useful_links %></p>
    <h3>Command:</h3>
    <p id="hint"><%= @stage.hints %></p>
  <div>
  </div>

</div>
<!-- JavaScript -->
<script src="/assets/bootstrap.js"></script>
<script type="text/javascript">
function progress1(num1)
{
  $("#test2").css('height',String(100/8*num1)+"%");
  $("#test1").css('height',String(100-((100/8*num1)-num1)+"%"));
      // document.getElementById("test2").style.height=num;
      // document.getElementById("test1").style.height=100-num;
}
function progress2(num2)
{
  $("#test4").css('height',String(100/7*num2)+"%");
  $("#test3").css('height',String(100-((100/7*num2)-num2)+"%"));
  // document.getElementById("test2").style.height=num;
  // document.getElementById("test1").style.height=100-num;
}
progress1(<%= @numA %>)
progress2(<%= @numB %>)

function write_content()
{
  
  var myCode = editor.getSession().getValue();
  ws.send("save:"+global_variable+":"+myCode);
}
    </script>
    <script type="text/javascript">
       $("#question").effect("highlight",{},1000);
    </script>
    <script type="text/javascript">
    function clickb()
    {
      $("#texte").effect("highlight",{},1000);
    }
    </script>

  </body>
  </html>
